# Mirta Core

[![GitHub Workflow Status](https://img.shields.io/github/actions/workflow/status/wb-mirta/core/build.yml?branch=latest&logo=github&style=flat-square)](https://github.com/wb-mirta/core/actions/workflows/build.yml)
[![GitHub Repo Stars](https://img.shields.io/github/stars/wb-mirta/core?color=594ae2&style=flat-square&logo=github)](https://github.com/wb-mirta/core/stargazers)
[![GitHub Last Commit](https://img.shields.io/github/last-commit/wb-mirta/core?color=594ae2&style=flat-square&logo=github)](https://github.com/wb-mirta/core)
[![NPM Downloads](https://img.shields.io/npm/dm/mirta?style=flat-square&logo=npm)](https://npmjs.com/package/mirta)

Мирта - фреймворк для удобной разработки сценариев управления умными домами и другими автоматизациями с применением правил wb-rules контроллеров компании Wiren Board.

Среди ключевых особенностей можно выделить:

- Мастер первичной настройки - задаёт ряд вопросов и генерирует стартовый проект по вашим предпочтениям;
- Поддержка TypeScript - снимает стандартные ограничения ECMAScript 5;
- Статический анализ кода - выявляет потенциальные проблемы, слабые места в архитектуре приложения;
- Юнит-тесты и имитация запуска на контроллере - даёт возможность быстро проверить корректность отдельных частей программы;
- Хранилище состояний - современная замена классическому module.static;
- Пользовательские события - связующее звено между различными частями кода;
- Поддержка загружаемых модулей и девайсов, оформленных в виде отдельных NPM-пакетов.

В разработке специальный репозиторий для устройств, откуда можно быстро взять то или иное готовое решение.

Чтобы создавать собственные проекты с использованием фреймворка, не требуется вникать в его исходные коды. Однако, все они здесь - проект структурирован по принципу монорепозитория, с разделением на пакеты (см. каталог `packages`). Всё открыто для ваших идей и предложений.

## Перед началом

Убедитесь, что на вашем компьютере установлен `NodeJs` в варианте LTS (не ниже 20.x.x), а также менеджер пакетов `pnpm`.

## Рекомендуемый способ создания проектов

В папке, где будет храниться проект, откройте командную строку и выполните

```sh
pnpm create mirta
```
Запустится мастер настройки, который задаст несколько вопросов и сгенерирует код на основе ваших предпочтений - больше никаких сложных конфигураций, всё настроено заранее.

После создания проекта можно открыть его в подходящем редакторе, например VSCode:
```sh
code ./wb-rules-mirta
```
Здесь `wb-rules-mirta` - название вашего проекта, указанное на соответствующем шаге мастера.

## Способы поддержать проект
Поблагодарить разработчика можно через сервис для безналичных чаевых от Т‑Банка и CloudPayments:

[![Поддержать через CloudTips](https://img.shields.io/badge/%D0%9F%D0%BE%D0%B4%D0%B4%D0%B5%D1%80%D0%B6%D0%B0%D1%82%D1%8C-Cloud_Tips-blue?style=for-the-badge
)](https://pay.cloudtips.ru/p/58512cca)

## История создания

Идея [шаблона для быстрого старта](https://github.com/wihome-dev/wb-rules-typescript) разработки правил на TypeScript начала активно развиваться и стало понятно, что формат репозитория «всё в одном» слишком сложен для восприятия, а его модернизация без разделения на версии приводит к значительным изменениям.

Было решено оставить базовый репозиторий в качестве руководства по основам самостоятельной настройки, а весь вспомогательный код вынести в отдельные пакеты и загружать их по мере необходимости. Так создаётся минималистичный проект, который ничем не отвлекает от самого главного - процесса создания ваших собственных правил!

Мирта берёт на себя все нюансы настройки многочисленных конфигураций.

## Полезные ссылки

Движок правил wb-rules 2.0:<br/>
https://github.com/wirenboard/wb-rules

Канал про автоматизации на основе оборудования Wirenboard на Дзене:<br/>
https://dzen.ru/wihome
